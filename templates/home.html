<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>KxShare Control Center - Secure Repository Sharing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- GSAP Animation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        :root {
            --primary: #ffd93d;   /* Yellow */
            --secondary: #66d9ef; /* Cyan */
            --pink: #ff6b9d;      /* Pink */
            --green: #a8e6cf;     /* Green */
            --bg: #f5f0e6;        /* Vintage Paper */
            --border: #000000;
            --card-bg: #ffffff;
            --shadow: 8px 8px 0px #000;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background-color: var(--bg);
            background-image: radial-gradient(var(--border) 1px, transparent 1px);
            background-size: 25px 25px;
            color: var(--border);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* --- TOP MARQUEE --- */
        .marquee-top {
            background: var(--border);
            color: var(--primary);
            padding: 10px 0;
            border-bottom: 4px solid var(--border);
            font-family: 'Space Mono', monospace;
            font-weight: 700;
            text-transform: uppercase;
            overflow: hidden;
            white-space: nowrap;
            z-index: 100;
        }

        .marquee-track {
            display: inline-block;
            animation: marqueeMove 25s linear infinite;
        }

        @keyframes marqueeMove {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); }
        }

        /* --- PAGE WRAPPER --- */
        .page-wrapper {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        /* --- STICKERS (Alignment Optimized) --- */
        .sticker {
            position: absolute;
            padding: 10px 15px;
            border: 3px solid var(--border);
            font-family: 'Space Mono';
            font-weight: bold;
            font-size: 0.7rem;
            box-shadow: 4px 4px 0px var(--border);
            z-index: 5;
            text-transform: uppercase;
            pointer-events: none;
        }
        .s-1 { top: 10%; left: 5%; background: var(--pink); transform: rotate(-10deg); }
        .s-2 { top: 15%; right: 5%; background: var(--secondary); transform: rotate(10deg); }

        /* --- MAIN DASHBOARD --- */
        .dashboard-container {
            max-width: 1050px;
            width: 100%;
            background: var(--card-bg);
            border: 4px solid var(--border);
            box-shadow: var(--shadow);
            padding: 35px;
            position: relative;
            z-index: 10;
        }

        .dashboard-container::before {
            content: "SYSTEM_VAULT_v4.0";
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary);
            padding: 5px 25px;
            border: 3px solid var(--border);
            font-family: 'Space Mono';
            font-weight: bold;
            font-size: 0.75rem;
            box-shadow: 4px 4px 0px var(--border);
        }

        /* --- HEADER --- */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 4px solid var(--border);
            padding-bottom: 20px;
            margin-bottom: 30px;
            gap: 20px;
        }

        .brand h1 {
            font-size: 2.5rem;
            text-transform: uppercase;
            letter-spacing: -2px;
            line-height: 1;
        }

        .brand span { background: var(--secondary); border: 3px solid var(--border); padding: 0 8px; }

        .btn-mini {
            padding: 12px 18px;
            background: var(--green);
            border: 3px solid var(--border);
            font-weight: 700;
            text-transform: uppercase;
            text-decoration: none;
            color: var(--border);
            box-shadow: 4px 4px 0px var(--border);
            font-size: 0.8rem;
            transition: 0.15s;
        }

        .btn-mini:hover { transform: translate(-2px, -2px); box-shadow: 6px 6px 0px var(--border); background: #fff; }

        /* --- COMPACT FORM GRID (3-Columns for Laptop) --- */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
        }

        .double-width { grid-column: span 2; }
        .full-width { grid-column: span 3; }

        .form-group { position: relative; }

        label {
            display: block;
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.85rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        label i { color: var(--pink); }

        input, select {
            width: 100%;
            padding: 14px 16px;
            border: 3px solid var(--border);
            font-family: 'Space Mono', monospace;
            background: white;
            box-shadow: 4px 4px 0px var(--border);
            outline: none;
            transition: 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        input:focus, select:focus {
            transform: translate(-3px, -3px);
            box-shadow: 7px 7px 0px var(--secondary);
            background: #fffdf9;
        }

        .submit-btn {
            grid-column: span 3;
            padding: 22px;
            background: var(--primary);
            border: 4px solid var(--border);
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            font-size: 1.3rem;
            text-transform: uppercase;
            cursor: pointer;
            box-shadow: 6px 6px 0px var(--border);
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .submit-btn:hover { background: #fff; transform: translate(-4px, -4px); box-shadow: 10px 10px 0px var(--border); }

        /* --- FOOTER SOCIALS --- */
        .footer-dashboard {
            margin-top: 35px;
            padding-top: 25px;
            border-top: 4px dashed var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .creator-tag { font-family: 'Space Mono'; font-weight: bold; font-size: 0.9rem; }
        .creator-tag span { background: var(--pink); color: white; padding: 2px 10px; border: 2px solid #000; }

        .social-row { display: flex; gap: 15px; }
        .social-icon {
            width: 45px;
            height: 45px;
            background: #fff;
            border: 3px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            text-decoration: none;
            box-shadow: 4px 4px 0px var(--border);
            transition: 0.2s;
        }
        .social-icon:hover { transform: translate(-3px, -3px) rotate(10deg); box-shadow: 6px 6px 0px var(--pink); background: var(--pink); color: #fff; }

        /* --- PRIVACY POPUP (Cookie Style) --- */
        .privacy-popup {
            position: fixed;
            bottom: 25px;
            left: 25px;
            max-width: 320px;
            background: var(--primary);
            border: 4px solid var(--border);
            box-shadow: 8px 8px 0px var(--border);
            padding: 20px;
            z-index: 1000;
            display: none; /* Managed by GSAP */
            transform: translateX(-120%);
        }

        .privacy-popup h4 { font-size: 1rem; text-transform: uppercase; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
        .privacy-popup p { font-family: 'Space Mono'; font-size: 0.75rem; margin-bottom: 15px; line-height: 1.4; }
        .popup-btns { display: flex; gap: 10px; }
        .btn-small { padding: 8px 12px; border: 2px solid #000; font-size: 0.7rem; font-weight: bold; cursor: pointer; text-transform: uppercase; background: #fff; text-decoration: none; color: #000; }
        .btn-small.accept { background: var(--border); color: #fff; }

        /* --- TOKEN ERROR MESSAGE --- */
        .token-error {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: #fff;
            border: 5px solid var(--border);
            max-width: 550px;
            width: 90%;
            box-shadow: 20px 20px 0px var(--border);
            z-index: 10001;
            opacity: 0;
            overflow: hidden;
        }
        .token-error.active {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }
        
        .error-header {
            background: var(--pink);
            padding: 25px 30px;
            border-bottom: 5px solid var(--border);
            text-align: center;
        }
        
        .error-header i {
            font-size: 4.5rem;
            color: var(--border);
            display: block;
            margin-bottom: 15px;
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-5deg); }
            75% { transform: translateX(10px) rotate(5deg); }
        }
        
        .error-header h3 {
            font-size: 1.8rem;
            text-transform: uppercase;
            color: var(--border);
            margin: 0;
            letter-spacing: -1px;
        }
        
        .error-body {
            padding: 35px 30px;
            background: #fff;
        }
        
        .error-message {
            background: var(--primary);
            border: 3px solid var(--border);
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 6px 6px 0px var(--border);
        }
        
        .error-message p {
            font-family: 'Space Mono', monospace;
            font-size: 1rem;
            line-height: 1.7;
            margin: 0;
            color: var(--border);
        }
        
        .error-message code {
            background: var(--border);
            color: var(--primary);
            padding: 4px 10px;
            font-weight: bold;
            border: 2px solid var(--border);
            display: inline-block;
            margin: 0 3px;
        }
        
        .error-hint {
            background: var(--bg);
            border: 3px solid var(--border);
            padding: 18px;
            margin-bottom: 25px;
            box-shadow: 4px 4px 0px var(--border);
        }
        
        .error-hint strong {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            text-transform: uppercase;
            margin-bottom: 10px;
            color: var(--border);
        }
        
        .error-hint strong i {
            color: var(--secondary);
            font-size: 1.2rem;
        }
        
        .error-hint p {
            font-family: 'Space Mono', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            margin: 0;
            color: var(--border);
        }
        
        .error-actions {
            display: flex;
            gap: 15px;
        }
        
        .close-error-btn {
            flex: 1;
            background: var(--border);
            color: #fff;
            border: 3px solid var(--border);
            padding: 15px 25px;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.3);
            transition: 0.15s;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.9rem;
        }
        
        .close-error-btn:hover {
            transform: translate(-3px, -3px);
            box-shadow: 8px 8px 0px rgba(0,0,0,0.3);
            background: #333;
        }
        
        .get-token-btn {
            flex: 1;
            background: var(--secondary);
            color: var(--border);
            border: 3px solid var(--border);
            padding: 15px 25px;
            font-weight: 700;
            text-transform: uppercase;
            cursor: pointer;
            box-shadow: 5px 5px 0px rgba(0,0,0,0.3);
            transition: 0.15s;
            font-family: 'Space Grotesk', sans-serif;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .get-token-btn:hover {
            transform: translate(-3px, -3px);
            box-shadow: 8px 8px 0px rgba(0,0,0,0.3);
            background: #fff;
        }
        
        .error-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.85);
            z-index: 10000;
            display: none;
            backdrop-filter: blur(6px);
        }
        .error-overlay.active {
            display: block;
        }

        /* --- TOKEN GUIDE MODAL --- */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal-overlay.active { display: flex; }
        
        .modal-box {
            background: white;
            border: 4px solid var(--border);
            box-shadow: 15px 15px 0px var(--border);
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(1);
            opacity: 1;
        }
        
        .modal-header {
            background: var(--primary);
            padding: 25px;
            border-bottom: 4px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .modal-header h2 {
            font-size: 1.6rem;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .close-btn {
            background: var(--pink);
            border: 3px solid var(--border);
            padding: 10px 20px;
            font-weight: 700;
            cursor: pointer;
            font-size: 1rem;
            transition: 0.2s;
            font-family: 'Space Grotesk', sans-serif;
            text-transform: uppercase;
        }
        
        .close-btn:hover {
            background: var(--border);
            color: white;
            transform: translate(-2px, -2px);
            box-shadow: 4px 4px 0px var(--pink);
        }
        
        .modal-body {
            padding: 35px;
        }
        
        .info-highlight {
            background: var(--primary);
            border: 3px solid var(--border);
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 4px 4px 0px var(--border);
        }
        
        .info-highlight strong {
            font-size: 1.1rem;
            display: block;
            margin-bottom: 10px;
        }
        
        .info-highlight p {
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        
        .guide-step {
            margin: 25px 0;
            padding: 25px;
            background: var(--bg);
            border: 3px solid var(--border);
            box-shadow: 5px 5px 0px var(--border);
        }
        
        .step-num {
            background: var(--secondary);
            color: white;
            width: 45px;
            height: 45px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border: 3px solid var(--border);
            font-weight: 700;
            margin-right: 15px;
            font-size: 1.3rem;
            box-shadow: 3px 3px 0px var(--border);
        }
        
        .guide-step h3 {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .guide-step p {
            font-family: 'Space Mono', monospace;
            font-size: 0.95rem;
            line-height: 1.8;
            margin-left: 60px;
        }
        
        .guide-step code {
            background: white;
            border: 2px solid var(--border);
            padding: 3px 10px;
            font-weight: 700;
            color: var(--pink);
        }

        /* --- TOAST NOTIFICATION --- */
        .toast {
            position: fixed;
            top: 30px;
            right: 30px;
            background: var(--green);
            border: 4px solid var(--border);
            padding: 18px 25px;
            box-shadow: 8px 8px 0px var(--border);
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            opacity: 0;
            transform: translateX(400px);
        }
        .toast i { font-size: 1.3rem; }
        .toast.success { background: var(--green); }
        .toast.error { background: var(--pink); }

        /* --- RECENT LINKS SECTION --- */
        .recent-links-section {
            margin-top: 35px;
            padding: 30px;
            background: var(--card-bg);
            border: 4px solid var(--border);
            box-shadow: 6px 6px 0px var(--border);
        }
        .recent-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 18px;
            border-bottom: 3px dashed var(--border);
        }
        .recent-header h3 {
            font-size: 1.3rem;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .clear-btn {
            background: var(--pink);
            border: 3px solid var(--border);
            padding: 10px 18px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 3px 3px 0px var(--border);
            transition: 0.15s;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.85rem;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .clear-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 5px 5px 0px var(--border);
            background: #fff;
        }
        .recent-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .recent-item {
            padding: 20px;
            background: var(--primary);
            border: 3px solid var(--border);
            box-shadow: 4px 4px 0px var(--border);
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
            gap: 20px;
            transition: 0.15s;
        }
        .recent-item:hover {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0px var(--border);
        }
        .recent-info {
            min-width: 0;
        }
        .recent-repo {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 8px;
            font-family: 'Space Mono', monospace;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .recent-meta {
            font-size: 0.8rem;
            opacity: 0.75;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            font-family: 'Space Mono', monospace;
        }
        .recent-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .recent-actions {
            display: flex;
            gap: 10px;
        }
        .action-btn {
            background: white;
            border: 3px solid var(--border);
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 3px 3px 0px var(--border);
            transition: 0.15s;
            font-size: 1.1rem;
        }
        .action-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 5px 5px 0px var(--border);
        }
        .action-btn.copy-btn:hover { background: var(--green); }
        .action-btn.delete-btn:hover { background: var(--pink); color: white; }
        .action-btn.open-btn:hover { background: var(--secondary); }
        .empty-recent {
            text-align: center;
            padding: 50px 20px;
            opacity: 0.5;
        }
        .empty-recent i {
            font-size: 3.5rem;
            margin-bottom: 15px;
            opacity: 0.3;
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 1024px) {
            .form-grid { grid-template-columns: 1fr 1fr; }
            .double-width, .submit-btn, .full-width { grid-column: span 2; }
        }

        @media (max-width: 768px) {
            .form-grid { grid-template-columns: 1fr; }
            .double-width, .submit-btn, .full-width { grid-column: span 1; }
            .header { flex-direction: column; text-align: center; gap: 15px; }
            .sticker { display: none !important; }
            .modal-box { 
                max-width: 95%; 
                max-height: 85vh; 
                box-shadow: 8px 8px 0px var(--border);
            }
            .modal-body { padding: 20px 15px; }
            .guide-step { padding: 15px; margin: 15px 0; }
            .guide-step p { 
                margin-left: 0; 
                margin-top: 12px; 
                font-size: 0.85rem;
            }
            .modal-header { padding: 18px 15px; }
            .modal-header h2 { font-size: 1.1rem; }
            .step-num { 
                width: 35px; 
                height: 35px; 
                font-size: 1.1rem;
                margin-right: 10px;
            }
            .guide-step h3 { font-size: 1.1rem; }
            .close-btn { padding: 8px 15px; font-size: 0.9rem; }
            .submit-btn { padding: 15px; font-size: 0.9rem; gap: 8px; }
            .privacy-popup { width: 85%; max-width: 280px; padding: 15px; bottom: 10px; left: 10px; }
            .privacy-popup h4 { font-size: 0.85rem; }
            .privacy-popup p { font-size: 0.65rem; }
            
            .token-error { 
                max-width: 95%; 
                box-shadow: 12px 12px 0px var(--border);
            }
            .error-header { padding: 20px; }
            .error-header i { font-size: 3rem; margin-bottom: 10px; }
            .error-header h3 { font-size: 1.3rem; }
            .error-body { padding: 20px; }
            .error-message { padding: 15px; margin-bottom: 20px; }
            .error-message p { font-size: 0.9rem; }
            .error-hint { padding: 15px; margin-bottom: 20px; }
            .error-hint strong { font-size: 0.85rem; }
            .error-hint p { font-size: 0.8rem; }
            .error-actions { flex-direction: column; gap: 10px; }
            .close-error-btn, .get-token-btn { 
                padding: 12px 20px; 
                font-size: 0.85rem;
            }
            
            /* Toast Responsive */
            .toast { right: 15px; top: 15px; padding: 15px 20px; font-size: 0.9rem; }
            
            /* Recent Links Responsive */
            .recent-links-section { 
                margin-top: 25px;
                padding: 20px; 
            }
            .recent-header { 
                flex-direction: column;
                align-items: stretch;
                gap: 12px;
                margin-bottom: 20px;
                padding-bottom: 15px;
            }
            .recent-header h3 { font-size: 1rem; }
            .clear-btn { 
                width: 100%;
                justify-content: center;
                padding: 12px;
            }
            .recent-item { 
                padding: 18px;
                gap: 15px;
                grid-template-columns: 1fr;
            }
            .recent-repo { font-size: 0.95rem; }
            .recent-meta { 
                flex-direction: column;
                gap: 6px;
                font-size: 0.75rem;
            }
            .recent-actions { 
                width: 100%;
                justify-content: space-between;
            }
            .action-btn { 
                flex: 1;
                max-width: none;
            }
        }
        
        @media (max-width: 900px) and (min-width: 769px) {
            .recent-links-section { 
                margin-top: 30px;
                padding: 25px; 
            }
            .recent-header h3 { font-size: 1.1rem; }
            .recent-item { 
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 18px;
            }
            .recent-actions { 
                justify-content: flex-start;
            }
        }
    </style>
</head>
<body>

    <!-- MARQUEE BANNER -->
    <div class="marquee-top">
        <div class="marquee-track">
            üöÄ KXSHARE IS NOW OPENSOURCE! ANYONE CAN CONTRIBUTE ‚Ä¢ CONTRIBUTE ON GITHUB ‚Ä¢ SECURE REPOSITORY SHARING ‚Ä¢ AUTO-DELETION PROTOCOL ENABLED ‚Ä¢ PRIVACY FIRST ‚Ä¢ üöÄ
        </div>
    </div>

    <div class="page-wrapper">
        <!-- STICKERS -->
        <div class="sticker s-1">AES-256 ENCRYPTED</div>
        <div class="sticker s-2">OPENSOURCE v3.0</div>

        <!-- MAIN DASHBOARD -->
        <main class="dashboard-container" id="mainDashboard">
            
            <header class="header">
                <div class="brand">
                    <h1>Kx<span>SHARE</span></h1>
                    <p style="font-family: 'Space Mono'; font-size: 0.75rem; margin-top: 8px;">// TERMINAL_ACCESS_CONNECTED</p>
                </div>
                <div class="header-actions">
                    <button onclick="openTokenGuide()" class="btn-mini" style="cursor: pointer;"><i class="fas fa-terminal"></i> Get Token</button>
                </div>
            </header>

            <form method="POST">
                <div class="form-grid">
                    <!-- GitHub Token -->
                    <div class="form-group double-width">
                        <label><i class="fas fa-key"></i> GitHub Access Token</label>
                        <input type="password" name="token" placeholder="ghp_xxxxxxxxxxxx" value="{{ saved_token }}" required>
                        <div style="margin-top: 12px; display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" name="save_token" value="yes" id="saveToken" {% if saved_token %}checked{% endif %} style="width: 22px; height: 22px; cursor: pointer;">
                            <label for="saveToken" style="margin: 0; font-weight: normal; cursor: pointer; text-transform: none;">Remember Token (Encrypted Session)</label>
                        </div>
                    </div>

                    <!-- Expiry -->
                    <div class="form-group">
                        <label><i class="fas fa-hourglass-half"></i> Link Expiry</label>
                        <select name="expiry_days">
                            <option value="1">1 Day</option>
                            <option value="7" selected>7 Days</option>
                            <option value="30">30 Days</option>
                        </select>
                    </div>

                    <!-- Repo URL -->
                    <div class="form-group double-width">
                        <label><i class="fab fa-github"></i> Repository URL</label>
                        <input type="text" name="repo_url" placeholder="https://github.com/owner/repo" required>
                    </div>

                    <!-- Password -->
                    <div class="form-group">
                        <label><i class="fas fa-lock"></i> Pass-Protection</label>
                        <input type="password" name="protection_password" placeholder="Optional Password">
                    </div>

                    <!-- SUBMIT -->
                    <button type="submit" class="submit-btn" id="submitBtn">
                        <i class="fas fa-rocket"></i> GENERATE SECURE LINK
                    </button>
                </div>
            </form>

            <!-- Recent Links Section -->
            <div class="recent-links-section" id="recentLinksSection" style="display: none;">
                <div class="recent-header">
                    <h3><i class="fas fa-history"></i> Recently Created Links</h3>
                    <button class="clear-btn" onclick="clearAllLinks()"><i class="fas fa-trash"></i> Clear All</button>
                </div>
                <div class="recent-grid" id="recentLinksGrid"></div>
            </div>

            <div class="footer-dashboard">
                <div class="creator-tag">CREATED BY <span>KARANNKX</span></div>
                <div class="social-row">
                    <a href="https://github.com/Karannkx" class="social-icon" target="_blank"><i class="fab fa-github"></i></a>
                    <a href="https://linkedin.com/in/Karannkx" class="social-icon" target="_blank"><i class="fab fa-linkedin"></i></a>
                    <a href="https://instagram.com/Karannkx" class="social-icon" target="_blank"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Success!</span>
    </div>

    <!-- Token Error Overlay -->
    <div class="error-overlay" id="errorOverlay"></div>
    
    <!-- Token Error Message -->
    <div class="token-error" id="tokenError">
        <div class="error-header">
            <i class="fas fa-exclamation-triangle"></i>
            <h3>Invalid Token!</h3>
        </div>
        <div class="error-body">
            <div class="error-message">
                <p><strong>GitHub Personal Access Tokens must start with <code>ghp_</code></strong></p>
            </div>
            <div class="error-hint">
                <strong><i class="fas fa-lightbulb"></i> What's wrong?</strong>
                <p>The token you entered doesn't match GitHub's format. Valid tokens always begin with "ghp_" followed by alphanumeric characters.</p>
            </div>
            <div class="error-actions">
                <button onclick="closeTokenError()" class="close-error-btn">
                    <i class="fas fa-check"></i> GOT IT!
                </button>
                <button onclick="closeTokenError(); openTokenGuide();" class="get-token-btn">
                    <i class="fas fa-terminal"></i> GET TOKEN
                </button>
            </div>
        </div>
    </div>

    <!-- PRIVACY POPUP -->
    <div class="privacy-popup" id="privacyPopup">
        <h4><i class="fas fa-shield-alt"></i> Privacy Guard</h4>
        <p>Tokens are AES-256 encrypted and auto-deleted upon link expiry. No repository content is ever stored on our servers.</p>
        <div class="popup-btns">
            <button class="btn-small accept" onclick="closePopup()">I Trust It</button>
            <a href="/privacy-policy" class="btn-small">Read More</a>
        </div>
    </div>

    <footer style="text-align: center; padding: 15px; font-family: 'Space Mono'; font-size: 0.7rem; opacity: 0.5;">
        // KXSHARE_SECURE_ENDPOINT_2025 //
    </footer>
    
    <!-- Token Guide Modal -->
    <div class="modal-overlay" id="tokenModal">
        <div class="modal-box">
            <div class="modal-header">
                <h2><i class="fas fa-graduation-cap"></i> How to Get GitHub Token</h2>
                <button onclick="closeTokenGuide()" class="close-btn">‚úï CLOSE</button>
            </div>
            <div class="modal-body">
                <div class="info-highlight">
                    <strong><i class="fas fa-lightbulb"></i> Why do I need a token?</strong>
                    <p>GitHub tokens allow secure access to private repositories. Your token is encrypted with AES-256 and never stored in plain text.</p>
                </div>

                <div class="guide-step">
                    <h3><span class="step-num">1</span> Go to GitHub Settings</h3>
                    <p>‚Ä¢ Click your profile picture in the top-right corner<br>
                    ‚Ä¢ Select <strong>Settings</strong> from the dropdown menu</p>
                </div>
                
                <div class="guide-step">
                    <h3><span class="step-num">2</span> Open Developer Settings</h3>
                    <p>‚Ä¢ Scroll down to the bottom of the left sidebar<br>
                    ‚Ä¢ Click <strong>Developer settings</strong> (last option)</p>
                </div>
                
                <div class="guide-step">
                    <h3><span class="step-num">3</span> Generate Personal Access Token</h3>
                    <p>‚Ä¢ Click <strong>Personal access tokens</strong> in the left menu<br>
                    ‚Ä¢ Select <strong>Tokens (classic)</strong><br>
                    ‚Ä¢ Click <strong>Generate new token (classic)</strong> button</p>
                </div>
                
                <div class="guide-step">
                    <h3><span class="step-num">4</span> Configure Token Permissions</h3>
                    <p>‚Ä¢ Give a descriptive name (e.g., "KxShare Access")<br>
                    ‚Ä¢ Set expiration as needed (recommended: 90 days)<br>
                    ‚Ä¢ Select <strong>ALL scopes/permissions</strong><br>
                    ‚Ä¢ Most important: <code>repo</code>, <code>read:org</code>, <code>user</code><br>
                    ‚Ä¢ Scroll down and click <strong>Generate token</strong></p>
                </div>
                
                <div class="guide-step">
                    <h3><span class="step-num">5</span> Copy & Use Token</h3>
                    <p>‚Ä¢ Copy the generated token (starts with <code>ghp_</code>)<br>
                    ‚Ä¢ <strong>‚ö†Ô∏è IMPORTANT:</strong> Save it somewhere safe - you won't see it again!<br>
                    ‚Ä¢ Paste it in the KxShare form above<br>
                    ‚Ä¢ Enable "Remember Token" option for future use</p>
                </div>

                <div class="info-highlight" style="background: #ffe6e6; border-color: var(--pink);">
                    <strong><i class="fas fa-shield-alt"></i> Security Tips</strong>
                    <p style="text-align: left; margin-top: 10px;">
                        ‚Ä¢ Never share your token publicly<br>
                        ‚Ä¢ Rotate tokens every 90 days<br>
                        ‚Ä¢ Only grant necessary permissions<br>
                        ‚Ä¢ KxShare encrypts your token end-to-end
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Toast Notification Function
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            const icon = toast.querySelector('i');
            
            toast.className = 'toast ' + type;
            toastMessage.textContent = message;
            
            if (type === 'success') {
                icon.className = 'fas fa-check-circle';
            } else {
                icon.className = 'fas fa-exclamation-circle';
            }
            
            gsap.to(toast, {
                opacity: 1,
                x: 0,
                duration: 0.5,
                ease: "back.out(1.7)"
            });
            
            setTimeout(() => {
                gsap.to(toast, {
                    opacity: 0,
                    x: 400,
                    duration: 0.4,
                    ease: "power2.in"
                });
            }, 3000);
        }

        // Recent Links Management
        function loadRecentLinks() {
            const recent = JSON.parse(localStorage.getItem('kxshare_recent_links') || '[]');
            const section = document.getElementById('recentLinksSection');
            const grid = document.getElementById('recentLinksGrid');
            
            if (recent.length === 0) {
                section.style.display = 'none';
                return;
            }
            
            section.style.display = 'block';
            grid.innerHTML = '';
            
            recent.forEach((link, index) => {
                const date = new Date(link.date);
                const timeAgo = getTimeAgo(date);
                
                const item = document.createElement('div');
                item.className = 'recent-item';
                item.innerHTML = `
                    <div class="recent-info">
                        <div class="recent-repo"><i class="fab fa-github"></i> ${link.repo}</div>
                        <div class="recent-meta">
                            <span><i class="fas fa-clock"></i> ${timeAgo}</span>
                            <span><i class="fas fa-hourglass-end"></i> Expires: ${link.expiry}</span>
                        </div>
                    </div>
                    <div class="recent-actions">
                        <button class="action-btn copy-btn" onclick="copyRecentLink('${link.url}', this)" title="Copy Link">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="action-btn open-btn" onclick="window.open('${link.url}', '_blank')" title="Open Link">
                            <i class="fas fa-external-link-alt"></i>
                        </button>
                        <button class="action-btn delete-btn" onclick="deleteRecentLink(${index})" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                grid.appendChild(item);
            });
            
            // Animate entrance
            gsap.from('.recent-item', {
                y: 20,
                opacity: 0,
                stagger: 0.1,
                duration: 0.4,
                ease: "power2.out"
            });
        }

        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            if (seconds < 60) return 'Just now';
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return `${minutes}m ago`;
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `${hours}h ago`;
            const days = Math.floor(hours / 24);
            return `${days}d ago`;
        }

        function copyRecentLink(url, btn) {
            navigator.clipboard.writeText(url).then(() => {
                showToast('Link copied to clipboard!', 'success');
                btn.innerHTML = '<i class="fas fa-check"></i>';
                btn.style.background = '#a8e6cf';
                setTimeout(() => {
                    btn.innerHTML = '<i class="fas fa-copy"></i>';
                    btn.style.background = 'white';
                }, 2000);
            });
        }

        function deleteRecentLink(index) {
            let recent = JSON.parse(localStorage.getItem('kxshare_recent_links') || '[]');
            recent.splice(index, 1);
            localStorage.setItem('kxshare_recent_links', JSON.stringify(recent));
            showToast('Link deleted', 'success');
            loadRecentLinks();
        }

        function clearAllLinks() {
            if (confirm('Are you sure you want to delete all recent links?')) {
                localStorage.removeItem('kxshare_recent_links');
                showToast('All links cleared', 'success');
                loadRecentLinks();
            }
        }

        // Form Validation
        document.querySelector('form').addEventListener('submit', function(e) {
            const tokenInput = document.querySelector('input[name="token"]');
            const tokenValue = tokenInput.value.trim();
            
            // Check if token is provided and doesn't start with ghp_
            if (tokenValue && !tokenValue.startsWith('ghp_')) {
                e.preventDefault();
                showTokenError();
                return false;
            }
        });
        
        function showTokenError() {
            const errorOverlay = document.getElementById('errorOverlay');
            const errorBox = document.getElementById('tokenError');
            
            errorOverlay.classList.add('active');
            
            gsap.to(errorBox, {
                scale: 1,
                opacity: 1,
                duration: 0.5,
                ease: "elastic.out(1, 0.75)",
                onStart: () => errorBox.classList.add('active')
            });
        }
        
        function closeTokenError() {
            const errorOverlay = document.getElementById('errorOverlay');
            const errorBox = document.getElementById('tokenError');
            
            gsap.to(errorBox, {
                scale: 0,
                opacity: 0,
                duration: 0.3,
                ease: "power2.in",
                onComplete: () => {
                    errorBox.classList.remove('active');
                    errorOverlay.classList.remove('active');
                }
            });
        }
        
        // Close on overlay click
        document.getElementById('errorOverlay').addEventListener('click', closeTokenError);
        
        document.addEventListener('DOMContentLoaded', () => {
            // Load recent links
            loadRecentLinks();
            
            const tl = gsap.timeline();

            // 1. Dashboard Animation
            tl.from("#mainDashboard", {
                duration: 0.8,
                y: 50,
                opacity: 0,
                ease: "power3.out"
            });

            // 2. Stickers Animation
            tl.from(".sticker", {
                duration: 0.5,
                scale: 0,
                stagger: 0.2,
                ease: "back.out(1.7)"
            }, "-=0.3");

            // 3. Privacy Popup Entrance (Delayed)
            gsap.to("#privacyPopup", {
                display: "block",
                x: 0,
                duration: 0.8,
                delay: 2,
                ease: "elastic.out(1, 0.75)"
            });

            // Floating Effect
            gsap.to(".sticker", {
                y: 10,
                duration: 2,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut",
                stagger: 0.4
            });
        });

        function closePopup() {
            gsap.to("#privacyPopup", {
                x: -400,
                duration: 0.5,
                ease: "power3.in",
                onComplete: () => document.getElementById('privacyPopup').style.display = 'none'
            });
        }
        
        // Token Guide Modal
        function openTokenGuide() {
            const modal = document.getElementById('tokenModal');
            const modalBox = modal.querySelector('.modal-box');
            
            modal.classList.add('active');
            
            // Reset and animate from initial state
            gsap.fromTo(modalBox, 
                {
                    scale: 0.8,
                    opacity: 0
                },
                {
                    scale: 1,
                    opacity: 1,
                    duration: 0.4,
                    ease: "back.out(1.7)"
                }
            );
        }
        
        function closeTokenGuide() {
            const modal = document.getElementById('tokenModal');
            const modalBox = modal.querySelector('.modal-box');
            
            gsap.to(modalBox, {
                scale: 0.8,
                opacity: 0,
                duration: 0.3,
                ease: "power2.in",
                onComplete: () => {
                    modal.classList.remove('active');
                    // Reset to initial state for next opening
                    gsap.set(modalBox, { scale: 1, opacity: 1 });
                }
            });
        }
        
        // Close on outside click
        document.getElementById('tokenModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeTokenGuide();
            }
        });
    </script>
</body>
</html>